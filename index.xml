<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>해피해킹 메모장</title><link>https://notes.hphk.io/</link><description>Recent content on 해피해킹 메모장</description><generator>Hugo -- gohugo.io</generator><language>ko-kr</language><lastBuildDate>Thu, 28 Jan 2021 15:53:00 +0900</lastBuildDate><atom:link href="https://notes.hphk.io/index.xml" rel="self" type="application/rss+xml"/><item><title>rbenv의 동작 원리</title><link>https://notes.hphk.io/p/how-rbenv-works/</link><pubDate>Thu, 28 Jan 2021 15:53:00 +0900</pubDate><guid>https://notes.hphk.io/p/how-rbenv-works/</guid><description>&lt;p>rbenv는 설치된 모든 버전의 ruby를 &lt;code>~/.rbenv/versions&lt;/code> 디렉토리 아래에 둔다.&lt;/p>
&lt;h2 id="rbenv-init">rbenv init&lt;/h2>
&lt;p>&lt;code>rbenv init -&lt;/code> 명령어를 실행하면 rbenv의 초기화 스크립트가 출력된다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">$ rbenv init -
&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/Users/zzulu/.rbenv/shims:&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PATH&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="nb">export&lt;/span> &lt;span class="nv">RBENV_SHELL&lt;/span>&lt;span class="o">=&lt;/span>bash
&lt;span class="nb">source&lt;/span> &lt;span class="s1">&amp;#39;/usr/local/Cellar/rbenv/1.1.1/libexec/../completions/rbenv.bash&amp;#39;&lt;/span>
&lt;span class="nb">command&lt;/span> rbenv rehash 2&amp;gt;/dev/null
rbenv&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nb">local&lt;/span> &lt;span class="nb">command&lt;/span>
&lt;span class="nv">command&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$#&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -gt &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">shift&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$command&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> in
rehash&lt;span class="p">|&lt;/span>shell&lt;span class="o">)&lt;/span>
&lt;span class="nb">eval&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>rbenv &lt;span class="s2">&amp;#34;sh-&lt;/span>&lt;span class="nv">$command&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
*&lt;span class="o">)&lt;/span>
&lt;span class="nb">command&lt;/span> rbenv &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$command&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;span class="k">esac&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>따라서 &lt;code>eval &amp;quot;$(rbenv init –)&amp;quot;&lt;/code> 명령어를 통해서 rbenv의 초기화 스크립트를 실행한다. rbenv를 사용하기 위해서는 초기화가 항상 필요하므로, &lt;code>~/.bash_profile&lt;/code>에 아래의 내용을 작성하여 터미널이 실행될 때 마다 rbenv의 초기화가 진행되도록 한다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="k">if&lt;/span> which rbenv &amp;gt; /dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="nb">eval&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>rbenv init -&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="shims">shims&lt;/h2>
&lt;p>shim에 대한 위키피디아의 정의는 다음과 같다.&lt;/p>
&lt;blockquote>
&lt;p>In computer programming, a shim is a small library that transparently intercepts API calls and changes the arguments passed, handles the operation itself, or redirects the operation elsewhere.&lt;/p>
&lt;/blockquote>
&lt;p>rbenv는 &lt;code>~/.rbenv/shims&lt;/code> 디렉토리가 존재하며, 환경변수 &lt;code>PATH&lt;/code>의 제일 앞에 이 경로를 추가함으로써 터미널에서 실행되는 명령어가 rbenv의 관리하에 있는 ruby 명령어일 경우 rbenv가 intercept 할 수 있도록 한다.
따라서 &lt;code>ruby -v&lt;/code> 명령어를 실행하게 되면, &lt;code>~/.rbenv/shims&lt;/code> 디렉토리에서 shim script인 &lt;code>ruby&lt;/code>를 찾고, 실행하게 된다.&lt;/p>
&lt;p>&lt;code>~/.rbenv/shims&lt;/code> 디렉토리에 있는 실행 파일들의 내용을 보면 모두가 아래와 같은 동일한 쉘 스크립트 코드를 가지고 있다. &lt;code>~/.rbenv/shims/rails&lt;/code>든 &lt;code>~/.rbenv/shims/bundler&lt;/code>든 모두 같은 코드를 가지고 있다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="cp">#!/usr/bin/env bash
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="nb">set&lt;/span> -e
&lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$RBENV_DEBUG&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">set&lt;/span> -x
&lt;span class="nv">program&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="p">##*/&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$program&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ruby&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="k">for&lt;/span> arg&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$arg&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> in
-e* &lt;span class="p">|&lt;/span> -- &lt;span class="o">)&lt;/span> &lt;span class="nb">break&lt;/span> &lt;span class="p">;;&lt;/span>
*/* &lt;span class="o">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$arg&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">export&lt;/span> &lt;span class="nv">RBENV_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">arg&lt;/span>&lt;span class="p">%/*&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="nb">break&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="p">;;&lt;/span>
&lt;span class="k">esac&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="nb">export&lt;/span> &lt;span class="nv">RBENV_ROOT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/Users/zzulu/.rbenv&amp;#34;&lt;/span>
&lt;span class="nb">exec&lt;/span> &lt;span class="s2">&amp;#34;/usr/local/Cellar/rbenv/1.1.1/libexec/rbenv&amp;#34;&lt;/span> &lt;span class="nb">exec&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$program&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>shim 파일 자체로는 많은 일을 하지 않는다. 환경 변수 &lt;code>RBENV_DIR&lt;/code>와 &lt;code>RBENV_ROOT&lt;/code>를 설정하고, &lt;code>/usr/local/Cellar/rbenv/1.0.0/libexec/rbenv exec [original-command] [original-args]&lt;/code> 명령어를 실행한다.
따라서 &lt;code>rails s&lt;/code>를 명령어를 입력하면 &lt;code>~/.rbenv/shims/rails&lt;/code>가 실행이 되는 것이고, 실제로는 &lt;code>rbenv exec rails s&lt;/code>가 실행되는 것이다.&lt;/p>
&lt;h2 id="rbenv-exec">rbenv exec&lt;/h2>
&lt;p>&lt;code>rbenv exec&lt;/code>는 현재 사용중인 ruby 버전의 bin 디렉토리가 제일 앞에 오도록 환경 변수 &lt;code>PATH&lt;/code>를 설정하여 script 파일을 실행하도록 한다.&lt;/p>
&lt;p>&lt;code>rbenv exec rails s&lt;/code>를 실행하게 되면 다음과 같은 과정을 거쳐 실행된다.&lt;/p>
&lt;ol>
&lt;li>어떤 버전의 ruby를 사용할 지 찾는다. &lt;code>rbenv version-name&lt;/code> 명령어를 입력하면 현재 위치에서 사용하게 되는 ruby 버전을 보여주는데 이 버전을 사용한다. (&lt;a class="link" href="https://notes.hphk.io/2018/06/21/Detecting-Ruby-Version-In-rbenv.html" >rbenv가 ruby 버전을 찾는 순서&lt;/a>)&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>RBENV_VERSION=2.4.1
&lt;/code>&lt;/pre>&lt;ol start="2">
&lt;li>어떤 명령어를 실행할지 exec script의 첫 argument에서 찾는다. &lt;code>rbenv exec rails s&lt;/code>를 실행했으므로 지금 상황에서는 &lt;code>rails&lt;/code> 명령어를 나타낸다.&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>RBENV_COMMAND=rails
&lt;/code>&lt;/pre>&lt;ol start="3">
&lt;li>&lt;code>rbenv which&lt;/code> 명령어 실행하여 실행될 명령어가 있는 path를 찾는다. &lt;code>rbenv which rails&lt;/code> 명령어를 입력하면 path를 보여주는데 이 path를 사용한다.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">$ rbenv which rails
/Users/zzulu/.rbenv/versions/2.4.1/bin/rails
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>RBENV_COMMAND_PATH=/Users/zzulu/.rbenv/versions/2.4.1/bin/rails
&lt;/code>&lt;/pre>&lt;ol start="4">
&lt;li>&lt;code>RBENV_COMMAND_PATH&lt;/code>로부터 &lt;code>RBENV_BIN_PATH&lt;/code>를 생성하여 환경 변수 &lt;code>PATH&lt;/code>의 앞에 붙인다.&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>RBENV_BIN_PATH=/Users/shot/.rbenv/versions/2.4.1/bin
export PATH=&amp;quot;${RBENV_BIN_PATH}:${PATH}&amp;quot;
&lt;/code>&lt;/pre>&lt;ol start="5">
&lt;li>최종적으로 원본 명령어가 실행된다. 시스템은 shim이 아닌 원래의 binary를 찾아 실행한다.&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>rails s
&lt;/code>&lt;/pre>&lt;p>요약하자면 &lt;code>rbenv exec rails s&lt;/code> 명령어를 실행하면, rbenv exec가 명령어를 &lt;code>PATH=&amp;quot;~/.rbenv/versions/2.4.1/bin:$PATH&amp;quot; rails s&lt;/code>로 변경하여 실행하게 된다.&lt;/p>
&lt;h2 id="rbenv-rehash">rbenv rehash&lt;/h2>
&lt;p>&lt;code>rbenv rehash&lt;/code>는 &lt;code>~/.rbenv/shims&lt;/code> 디렉토리에 shim script를 만들어주는 명령어이다.&lt;/p>
&lt;p>이 명령어의 실행결과로 &lt;code>~/.rbenv/versions/[ruby-version]/bin&lt;/code> 디렉토리의 각 파일명과 동일한 쉘 스크립트 파일이 &lt;code>~/.rbenv/shims&lt;/code> 디렉토리에 생성된다.&lt;/p>
&lt;p>새로운 젬을 추가(&lt;code>gem install rails&lt;/code>) 또는 삭제(&lt;code>gem uninstall rails&lt;/code>)한 후에는 &lt;code>rbenv rehash&lt;/code> 명령어가 실행되어 현재의 ruby 버전의 실행 파일들(&lt;code>~/.rbenv/versions/[current-version]/bin/&lt;/code> 디렉토리 안의 스크립트들)의 이름과 동일한 shim script 파일들을 &lt;code>~/.rbenv/shims&lt;/code> 디렉토리에 생성한다. (오래된 버전의 rbenv는 자동으로 이 작업을 해주지 않아 따로 plugin이 존재했었다. 그러나 지금은 자동으로 해준다.)&lt;/p>
&lt;p>shim들이 생성되는 상세한 과정은 다음과 같다.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>~/.rbenv/shims&lt;/code> 디렉토리가 존재하는지 확인한다. 만약에 디렉토리가 없다면 생성한다.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>shim prototype 파일인 &lt;code>~/.rbenv/shims/.rbenv-shim&lt;/code>이 존재하는지 확인한다. 만약에 존재한다면 다른 곳에서 rehash가 진행되고 있다는 의미이므로 현재 진행중인 rehash를 종료한다.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>.rbenv-shim&lt;/code> 파일이 없다면 생성하여, 다른 rehash 작업이 방해하지 못하도록 한다. 그리고는 위에서 보았던 shim script의 내용을 prototype 파일에 작성한다.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>설치된 ruby 버전의 모든 bin 디렉토리를 탐색하여 해당 디렉토리에 존재하는 스크립트의 이름과 동일한 이름의 shim script를 &lt;code>~/.rbenv/shims&lt;/code> 디렉토리에 생성하고, prototype 파일에 작성된 내용을 shim script에 복사한다. 모든 shim script는 같은 내용으로 작성된다.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>마지막으로 prototype 파일을 삭제한다.&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>rbenv가 ruby 버전을 찾는 순서</title><link>https://notes.hphk.io/p/detecting-ruby-version-in-rbenv/</link><pubDate>Thu, 28 Jan 2021 15:50:00 +0900</pubDate><guid>https://notes.hphk.io/p/detecting-ruby-version-in-rbenv/</guid><description>&lt;p>rbenv는 아래의 순서대로 루비 버전을 찾는다. &lt;code>[version]&lt;/code>은 &lt;strong>2.4.4&lt;/strong>와 같은 형식을 사용한다.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>RBENV_VERSION&lt;/code> 환경 변수에 설정된 ruby version을 사용한다. &lt;code>rbenv shell [version]&lt;/code> 명령어로 설정할 수 있다.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>실행하고자 하는 스크립트 파일이 위치하는 현재 디렉토리와 상위 디렉토리의 계층 구조를 따라 가면서 찾게 되는 &lt;code>.ruby-version&lt;/code> 파일의 버전을 인식한다. 이 과정은 루트 디렉토리까지 진행된다. &lt;code>.ruby-version&lt;/code> 파일은 &lt;code>rbenv local [version]&lt;/code> 명령어로 생성할 수 있다.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>전역 version 파일인 &lt;code>~/.rbenv/version&lt;/code> 파일을 참조하여 ruby version을 인식한다. 이 파일은 &lt;code>rbenv global [version]&lt;/code> 명령어로 생성할 수 있다.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;code>rbenv version&lt;/code> 명령어를 터미널에서 입력해보면 어디서 설정된 ruby 버전인지 확인 가능하다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">$ rbenv version
&lt;span class="c1"># shell&lt;/span>
2.4.1 &lt;span class="o">(&lt;/span>&lt;span class="nb">set&lt;/span> by RBENV_VERSION environment variable&lt;span class="o">)&lt;/span>
&lt;span class="c1"># local&lt;/span>
2.4.1 &lt;span class="o">(&lt;/span>&lt;span class="nb">set&lt;/span> by /Users/zzulu/Codes/Rails/rubychatbot/.ruby-version&lt;span class="o">)&lt;/span>
&lt;span class="c1"># global&lt;/span>
2.4.1 &lt;span class="o">(&lt;/span>&lt;span class="nb">set&lt;/span> by /Users/zzulu/.rbenv/version&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Git Bash with Windows Terminal</title><link>https://notes.hphk.io/p/git-bash-with-windows-terminal/</link><pubDate>Thu, 21 Jan 2021 15:10:00 +0900</pubDate><guid>https://notes.hphk.io/p/git-bash-with-windows-terminal/</guid><description>&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/windows-terminal.jpeg" alt="Featured image of post Git Bash with Windows Terminal" />&lt;blockquote>
&lt;p>Git Bash가 설치되어 있어야 합니다.&lt;/p>
&lt;/blockquote>
&lt;h2 id="1-windows-terminal-설치">1. Windows Terminal 설치&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.microsoft.com/store/productId/9N0DX20HK701" target="_blank" rel="noopener"
>Microsoft Store&lt;/a>에서 &lt;strong>Windows Terminal&lt;/strong>을 설치합니다.&lt;/p>
&lt;p>&lt;figure style="flex-grow: 128; flex-basis: 308px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/1.png" data-size="1801x1399">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/1.png"
width="1801"
height="1399"
loading="lazy"
alt="Microsoft Store - Windows Terminal">
&lt;/a>
&lt;figcaption>Microsoft Store - Windows Terminal&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h2 id="2-windows-terminal-실행">2. Windows Terminal 실행&lt;/h2>
&lt;p>처음 실행하면 기본으로 PowerShell, CMD, Azure Cloud Shell을 사용할 수 있도록 되어 있습니다.&lt;/p>
&lt;p>&lt;figure style="flex-grow: 182; flex-basis: 438px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/2.png" data-size="1733x949">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/2.png"
width="1733"
height="949"
loading="lazy"
alt="Windows Terminal shell list">
&lt;/a>
&lt;figcaption>Windows Terminal shell list&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>설정을 통해 추가적인 Shell(Bash)을 사용할 수 있도록 해봅시다.&lt;/p>
&lt;h2 id="3-windows-terminal-설정">3. Windows Terminal 설정&lt;/h2>
&lt;p>&lt;code>설정&lt;/code> 메뉴를 클릭하거나 &lt;code>ctrl + ,&lt;/code> 단축키를 사용하여, 설정 파일을 열 수 있습니다.&lt;/p>
&lt;p>&lt;figure style="flex-grow: 142; flex-basis: 342px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/3.png" data-size="1658x1162">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/3.png"
width="1658"
height="1162"
loading="lazy"
alt="settings.json">
&lt;/a>
&lt;figcaption>settings.json&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>메모장으로 열리기 때문에 편집이 불편할 수 있습니다. 다른 에디터를 사용하실 분들은 &lt;code>다른 이름으로 저장&lt;/code> 메뉴 또는 &lt;code>ctrl + shift + s&lt;/code> 단축키를 사용하여 &amp;lsquo;다른 이름으로 저장&amp;rsquo; 창을 열고, 해당 위치를 원하는 에디터로 열어 설정 파일을 편집합니다. 여기서는 VS Code를 사용하겠습니다. &lt;code>Code로 열기&lt;/code> 컨텍스트 메뉴를 통해 VS Code에서 설정 파일이 존재하는 폴더를 열어 줍니다.&lt;/p>
&lt;p>&lt;figure style="flex-grow: 132; flex-basis: 317px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/4.png" data-size="1179x890">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/4.png"
width="1179"
height="890"
loading="lazy"
alt="Open with VS Code">
&lt;/a>
&lt;figcaption>Open with VS Code&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>&lt;code>profiles&lt;/code> 항목에 &lt;code>Git Bash&lt;/code> 프로필을 추가합니다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;profiles&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nt">&amp;#34;list&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="p">[&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{61c54bbd-c2c6-5271-96e7-009a87ff44bf}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Windows PowerShell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;powershell.exe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{0caa0dad-35be-5f56-a8ff-afceeeaa6101}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;명령 프롬프트&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cmd.exe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{b453ae62-4e3d-5e58-b989-0a998ec441b8}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Azure Cloud Shell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;source&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Windows.Terminal.Azure&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{124fc1da-dadc-4276-9c4e-f0524ba57a49}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Git Bash&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;\&amp;#34;%PROGRAMFILES%\\git\\usr\\bin\\bash.exe\&amp;#34; -i -l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;%PROGRAMFILES%\\git\\mingw64\\share\\git\\git-for-windows.ico&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;startingDirectory&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;%USERPROFILE%&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;cursorShape&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;filledBox&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">]&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>이 때 프로필의 &lt;code>guid&lt;/code>는 해당 프로필의 고유 아이디이며, 저 포멧을 사용하고 다른 값과 중복되지만 않으면 어떠한 값도 사용 가능합니다. 위의 guid를 그대로 사용해도 되지만, 새롭게 생성하고 싶으신 분들은 PowerShell에서 아래의 명령어를 입력하여 새롭게 생성할 수 있습니다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="no">[guid]&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">NewGuid&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;figure style="flex-grow: 182; flex-basis: 437px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/5.png" data-size="1732x950">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/5.png"
width="1732"
height="950"
loading="lazy"
alt="Generate new guid">
&lt;/a>
&lt;figcaption>Generate new guid&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>다양한 프로필 설정법은 &lt;a class="link" href="https://aka.ms/terminal-profile-settings" target="_blank" rel="noopener"
>https://aka.ms/terminal-profile-settings&lt;/a> 에서 확인 가능합니다.&lt;/p>
&lt;p>저장을 하고 나면 아래와 같이 &lt;code>Git Bash&lt;/code>가 추가된 것을 확인할 수 있습니다.&lt;/p>
&lt;p>&lt;figure style="flex-grow: 182; flex-basis: 437px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/6.png" data-size="1732x950">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/6.png"
width="1732"
height="950"
loading="lazy"
alt="Git Bash on shell list">
&lt;/a>
&lt;figcaption>Git Bash on shell list&lt;/figcaption>
&lt;/figure> &lt;figure style="flex-grow: 182; flex-basis: 438px">
&lt;a href="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/7.png" data-size="1733x949">&lt;img src="https://notes.hphk.io/p/git-bash-with-windows-terminal/images/7.png"
width="1733"
height="949"
loading="lazy"
alt="Git Bash with Windows Terminal">
&lt;/a>
&lt;figcaption>Git Bash with Windows Terminal&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h2 id="4-기본-프로필-설정">4. 기본 프로필 설정&lt;/h2>
&lt;p>새 탭을 열었을 때 기본으로 나오는 프로필을 변경하려면, 기본으로 설정하고자 하는 프로필의 &lt;code>guid&lt;/code>를 &lt;code>defaultProfile&lt;/code> 키의 값으로 지정하면 됩니다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;defaultProfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;[guid]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;defaultProfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{124fc1da-dadc-4276-9c4e-f0524ba57a49}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Arrow Function vs Regular Function</title><link>https://notes.hphk.io/p/arrow-function-vs-regular-function/</link><pubDate>Wed, 20 Jan 2021 16:57:00 +0900</pubDate><guid>https://notes.hphk.io/p/arrow-function-vs-regular-function/</guid><description>&lt;img src="https://notes.hphk.io/p/arrow-function-vs-regular-function/images/carbon.png" alt="Featured image of post Arrow Function vs Regular Function" />&lt;p>&lt;strong>Arrow function이와 function 키워드의 가장 큰 차이점은 &lt;code>this&lt;/code> 의 차이이다.&lt;/strong>&lt;/p>
&lt;h2 id="1-왜-이벤트-리스너에서-일반적으로-arrow-function을-사용하면-안될까">1. 왜 이벤트 리스너에서 일반적으로 arrow function을 사용하면 안될까?&lt;/h2>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Document&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">button&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;function&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>function&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">button&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">button&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;arrow&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>arrow function&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">button&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://unpkg.com/axios/dist/axios.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">functionButton&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#function&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">arrowButton&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#arrow&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">functionButton&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;click&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;=====function=====&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">})&lt;/span>
&lt;span class="nx">arrowButton&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;click&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;=====arrow fuction=====&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">})&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>각각의 버튼을 눌러서 확인을 해보자.&lt;/p>
&lt;pre>&lt;code>=====function=====
&amp;lt;button id=&amp;quot;function&amp;quot;&amp;gt;function&amp;lt;/button&amp;gt;
=====arrow fuction=====
Window
&lt;/code>&lt;/pre>&lt;h2 id="2-this">2. this&lt;/h2>
&lt;p>자바스크립트의 this는 일반적인 프로그래밍 언어에서의 this와 조금 다르게 동작한다.&lt;/p>
&lt;p>java this와 python self의 인스턴스의 호출한 대상의 현재 객체를 뜻하는 것(참조)이었다.&lt;/p>
&lt;p>&lt;strong>자바스크립트의 function 키워드 함수에서는 함수가 어떻게 호출 되었는지에 따라 다르게 동작한다.
(동적으로 결정)&lt;/strong>&lt;/p>
&lt;p>브라우저 콘솔에 &lt;code>this&lt;/code>를 입력 해보자.&lt;/p>
&lt;p>&lt;figure style="flex-grow: 1425; flex-basis: 3420px">
&lt;a href="https://notes.hphk.io/p/arrow-function-vs-regular-function/images/01.png" data-size="1710x120">&lt;img src="https://notes.hphk.io/p/arrow-function-vs-regular-function/images/01.png"
width="1710"
height="120"
loading="lazy"
alt="브라우저 콘솔과 this">
&lt;/a>
&lt;figcaption>브라우저 콘솔과 this&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h3 id="2-1-window--함수-호출-함수-내-함수">2-1. window : 함수 호출, 함수 내 함수&lt;/h3>
&lt;p>window는 브라우저에서의 최상위 객체를 의미한다. (전역 객체)&lt;/p>
&lt;p>기본적인 함수 선언을 하고 호출한다면, 이 경우에는 전역에서 호출 하였으므로 전역 객체가 바인딩된다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">greeting&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">greeting&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// window
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>함수 내 함수는 추후에 다루겠다.&lt;/p>
&lt;h3 id="2-2-객체--메소드-호출">2-2. 객체 : 메소드 호출&lt;/h3>
&lt;p>메소드로 선언하고 호출한다면, 오브젝트의 메소드이므로 오브젝트가 바인딩된다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">you&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;neo&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">greeting&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">you&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">greeting&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// {name: &amp;#39;neo&amp;#39;, greeting: f} : this는 해당 오브젝트(객체)
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="2-3-arrow-function">2-3. Arrow Function&lt;/h3>
&lt;p>arrow function에서의 this는 어떻게 동작할까?&lt;/p>
&lt;p>&lt;strong>arrow function에서는 호출과 위치와 상관없이 상위 스코프 this를 가리킨다. (Lexical this)&lt;/strong>&lt;/p>
&lt;p>따라서, 메소드 선언을 arrow 함수로 하게 된다면, 해당 오브젝트의 상위 스코프인 전역 객체인 window가 바인딩된다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">arrowGreeting&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">me&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;me&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">arrowGreeting&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">arrowGreeting&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// window
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">me&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">arrowGreeting&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// window
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>메소드 선언은 function 키워드를 활용하자!&lt;/strong>&lt;/p>
&lt;h3 id="그러면-es6에서-언제-arrow-function을-활용하면-편할까">그러면 ES6에서 언제 arrow function을 활용하면 편할까?&lt;/h3>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">numbers&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="nx">print&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// {numbers: Array(1), print: ƒ}
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// [1]
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// window
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">num&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>내부 함수에서는 어디든 상관 없이 항상 전역객체를 바인딩한다.&lt;/strong>&lt;/li>
&lt;li>뒤에 이야기 한다고 했던 함수 내의 함수 상황의 예시가 위와 같다. 이때 arrow function을 쓰면 좋다!&lt;/li>
&lt;li>print 메소드의 내에 있는 콜백함수(forEach)에서의 상위 스코프는 num2 오브젝트이다.&lt;/li>
&lt;li>따라서, this가 아래와 같이 해당 오브젝트가 바인딩 된다.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">num2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">numbers&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="nx">print&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// {numbers: Array(1), print: ƒ}
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// [1]
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// {numbers: Array(1), print: ƒ}
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">num2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="다시-이벤트-리스너로-돌아와서">&lt;strong>다시 이벤트 리스너로 돌아와서,&lt;/strong>&lt;/h3>
&lt;p>&lt;code>addEventListener&lt;/code> 에서의 콜백 함수는 특별하게 function키워드의 경우에는 이벤트 리스너를 호출한 대상을 (&lt;code>event.target&lt;/code>) 뜻한다. 따라서, 호출한 대상을 원한다면 &lt;code>this&lt;/code> 를 활용할 수 있다.&lt;/p>
&lt;p>다만, arrow function의 경우 상위 스코프를 지칭하기 때문에 window 객체가 출력된 것이다.&lt;/p>
&lt;h2 id="3-정리">3. 정리&lt;/h2>
&lt;p>Arrow Function을 쓰면 안되는 대표적인 경우는 다음과 같다.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>object의 메소드 정의&lt;/p>
&lt;ul>
&lt;li>this가 전역 객체(window)를 나타낸다.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>생성자 함수&lt;/p>
&lt;ul>
&lt;li>
&lt;p>생성자 함수는 object를 생성하는 또다른 방법이다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">MyInfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;tak&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">phoneNumber&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;010-1234-5678&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">greeting&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;hi&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">Person&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">name&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">greeting&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;hi&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">justin&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Person&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;justin&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Arrow function을 사용하면 에러가 발생한다.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Animal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">name&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">dog&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Animal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dog&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// Uncaught TypeError: Animal is not a constructor
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>addEventListener 함수의 콜백 함수&lt;/p>
&lt;ul>
&lt;li>this가 전역 객체(window)를 나타낸다.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol></description></item></channel></rss>